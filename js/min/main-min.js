var personalityApp=angular.module("personalityApp",["ngRoute","ngAnimate","app.services","highcharts-ng","chart.js","720kb.socialshare"]);personalityApp.config(function(e){e.when("/",{templateUrl:"templates/builder.html",controller:"mainController"}).when("/results",{templateUrl:"templates/results.html",controller:"resultsController"}).when("/results/:id",{templateUrl:"templates/results.html",controller:"resultsController"}).otherwise({redirectTo:"/"})}),personalityApp.controller("mainController",function(e,t,o,r,n,i){e.motions=r,e.Q=1,e.emotion=n.current(),e.changeMotion=function(t){e.animation=null,o(function(){e.animation=t},10)},e.submitEmotion=function(o,r){if(3===o){var n="/results/"+r.name;t.path(n),i.add(r)}else e.Q=o+1},e.isActive=function(e,o){var r=e+o,n=r===t.url();return n}}),personalityApp.controller("resultsController",function(e,t,o,r){function n(e){if(0==e.length)return null;for(var t={},o=e[0],r=1,n=0;n<e.length;n++){var i=e[n];null==t[i]?t[i]=1:t[i]++,t[i]>r&&(o=i,r=t[i])}return o}function i(e){var t=[],o=[],r;e.sort();for(var n=0;n<e.length;n++)e[n]!==r?(t.push(e[n]),o.push(1)):o[o.length-1]++,r=e[n];return[t,o]}e.emotionResult=r.id,e.emotionResults=o.get(e.emotionResult),e.averageEmotion={},e.emotionResults.$loaded().then(function(){s()});var s=function(){function t(e,t){for(var o=0,r=0;r<e.length;r++)e[r]==t&&o++;return o}var o=0,r=0,s=0,a=0;motions=[],hues=[],radii=[],speeds=[],angular.forEach(e.emotionResults,function(e){a++,o+=Number(e.hue),r+=Number(e.radius),s+=Number(e.speed),motions.push(e.motion),hues.push(e.hue),radii.push(e.radius),speeds.push(e.speed)}),e.averageEmotion.radius=r/a,e.averageEmotion.hue=o/a,e.averageEmotion.speed=s/a,e.averageEmotion.motion=n(motions),e.motionLabels=i(motions)[0],e.motionData=i(motions)[1];var l=[],u=0;angular.forEach(i(hues)[0],function(e){l.push([Number(e),i(hues)[1][u]]),u++}),e.colorColors=l;var c=[],d=0;angular.forEach(i(radii)[0],function(e){c.push([Number(e),i(radii)[1][d]]),d++}),e.radii=c;var p=[],h=0;angular.forEach(i(speeds)[0],function(e){p.push([Number(-e),i(speeds)[1][h]]),h++}),e.speeds=p,e.colorChartConfig={options:{chart:{type:"scatter",backgroundColor:"transparent",events:{load:function(){this.renderer.image("img/hue.png",10,10,"95.5%",126).add()}}},tooltip:{formatter:function(){var e="People";return 1==this.y&&(e="Person"),"<b>"+this.y+"</b> "+e+" chose <b>"+this.x+"</b>"}},plotOptions:{series:{stacking:"normal"}}},series:[{color:"#fff",showInLegend:!1,data:e.colorColors,id:"series-0",name:"Other Hue Values"}],title:{text:""},xAxis:{min:0,max:360,gridLineColor:"transparent",title:{text:null},labels:{enabled:!1}},yAxis:{gridLineColor:"transparent",title:{text:null},labels:{enabled:!1}},credits:{enabled:!1},loading:!1,size:{},tooltip:{backgroundColor:"rgba(0,0,0,.5)",borderColor:"black",borderRadius:10,borderWidth:3}},e.radiusChartConfig={options:{chart:{type:"scatter",backgroundColor:"transparent"},tooltip:{formatter:function(){var e="People";return 1==this.y&&(e="Person"),"<b>"+this.y+"</b> "+e+" chose <b>"+this.x+"% radius</b>"}},plotOptions:{series:{stacking:"normal"}}},series:[{color:"#999",showInLegend:!1,data:e.radii,id:"series-0",name:"Other Hue Values"}],title:{text:""},xAxis:{min:0,max:50,title:{text:null}},yAxis:{title:{text:null}},credits:{enabled:!1},loading:!1,size:{},tooltip:{backgroundColor:"rgba(0,0,0,.5)",borderColor:"black",borderRadius:10,borderWidth:3}},e.speedChartConfig={options:{chart:{type:"scatter",backgroundColor:"transparent"},tooltip:{formatter:function(){var e="People";return 1==this.y&&(e="Person"),"<b>"+this.y+"</b> "+e+" chose <b>"+this.x+"s</b>"}},plotOptions:{series:{stacking:"normal"}}},series:[{color:"#999",showInLegend:!1,data:e.speeds,id:"series-0",name:"Other Hue Values"}],title:{text:""},xAxis:{min:.2,max:2,reversed:!1,title:{text:null}},yAxis:{title:{text:null}},credits:{enabled:!1},loading:!1,size:{},tooltip:{backgroundColor:"rgba(0,0,0,.5)",borderColor:"black",borderRadius:10,borderWidth:3}}};e.restart=function(){t.path("/")}}),personalityApp.controller("socialShare",function(e){e.social={url:"http://corysmc.github.io/emotion/",img:"http://corysmc.github.io/emotion/img/share.png",text:"Design an Emotion - Senior Project"}});